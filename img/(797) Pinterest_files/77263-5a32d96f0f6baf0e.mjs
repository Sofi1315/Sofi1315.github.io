(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[77263],{677263:(e,t,n)=>{n.d(t,{cA:()=>M,fM:()=>F,N5:()=>z});var r=n(667294),o=n(616550),a=n(938790),i=n(39008);const s=e=>{switch(e){case"/":return"homefeed";case"/pin/:id":case"/pin/:id/sent":return"pin_closeup";case"/pin/:id/visual-search":return"flashlight";case"/:username/:slug":return"board";case"/:username":return"other_profile";case"/search/:scope":return"search";case"/ideas/:interest/:id":return"topic";default:return null}},c=e=>{switch(e){case"/pin/:id":case"/pin/:id/sent":return"pin_closeup";case"/:username/:slug":return"board";case"/:username":return"other_profile";case"/ideas/:interest/:id":return"topic";default:return null}};var u=n(574155),d=n(938085),l=n(40660),p=n(845092),m=n(335741),f=n(768337),h=n(813107),_=n(154174);const g=e=>Number(e.toFixed(2));var w=n(994405);const v={pin_closeup:{LCP:"pin_closeup_lcp",FID:"pin_closeup_fid",INP:"pin_closeup_inp"},board:{LCP:"board_lcp",FID:"board_fid",INP:"board_inp"},other_profile:{LCP:"other_profile_lcp",FID:"other_profile_fid",INP:"other_profile_inp"},topic:{LCP:"topic_lcp",FID:"topic_fid",INP:"topic_inp"}},S=["CA","GB","DE","FR","AU","JP","BR","MX"],C=({surface:e,pwtStaticContext:t})=>{switch(e){case"pin_closeup":return[(0,w.Uw)({isDesktop:"desktop"===t.deviceType,viewerType:(t.isBot?"bot":t.isAuthenticated&&"auth")||"unauth"}),t.isAuthenticated?"web_eager_loadable_auth":"web_eager_loadable_unauth"];case"board":return[t.isAuthenticated?"web_eager_loadable_auth":"web_eager_loadable_unauth"];default:return[]}},E=({pwtStaticContext:e,surface:t})=>{const n=(({pwtStaticContext:e,surface:t})=>{const n=(0,p.Jx)({annotateExperiments:C({surface:t,pwtStaticContext:e}),annotateResourceTimingForSurface:t,annotateMarks:["initialAppLoad","RenderReactContainer",...e.isAuthenticated?[]:["firstClientRenderUnauthPageWrapper","mountUnauthPageWrapper"],..."pin_closeup"===t?["firstClientRenderCloseupPage","firstClientRenderCloseupImage"]:[]],name:v[t].LCP,pwtStaticContext:e}),r=(0,p.Jx)({name:v[t].FID,pwtStaticContext:e}),o=(0,p.Jx)({name:v[t].INP,pwtStaticContext:e});return(e,t)=>{"LCP"===e?n.stop(t):"FID"===e?r.stop(t):"INP"===e&&o.stop(t)}})({pwtStaticContext:e,surface:t}),{isAuthenticated:r,isBot:o,isSocialBot:a,deviceType:i,country:s,fullPath:c,browserName:u,osName:w}=e,E={},y=(d,p,m)=>{if(!E[d]){E[d]=!0;const g=(0,h.Z)(e),v=`${g}.${t}.${d}`,C=`${g}.tags.${t}.${d}`;let y;if(y="iOS"===w&&"Chrome"===u?"iOS_Chrome":"CrUX","LCPCount"===d)l.Z.count(`${v}.sum`,p,1),l.Z.increment(`${v}.size`,1);else{const e=(0,f.Z)(s),u=(0,_.Z)(c);"FID"===d||"FIDStartTime"===d?(l.Z.timing(`${v}`,p,1),l.Z.timing(`${C}`,p,1,{timingBucket:null==m?void 0:m.timingBucket,isAuth:r,CrUXSegment:y,region:e,...u&&{pinType:u}})):"INP"===d?(l.Z.timing(`${v}`,p,1),l.Z.timing(`${C}`,p,1,{isAuth:r,CrUXSegment:y,region:e})):(l.Z.timing(`${v}`,p,1),l.Z.timing(`${C}`,p,1,{isAuth:r,CrUXSegment:y,region:e,...u&&{pinType:u}})),!r&&S.includes(s)&&(({botType:e,deviceType:t,isChrome:n,region:r})=>{const o=`pwtlogger.${e}.${t}`,a=["all",...r?[r.toLowerCase()]:[]],i=["all",...n?["chrome"]:[]],s=[];return a.forEach((e=>{i.forEach((t=>{s.push(`${o}.region_${e}.browser_${t}`)}))})),s})({botType:(a?"socialBot":o&&"bot")||"nonbot",deviceType:i,isChrome:!0,region:e}).forEach((e=>{l.Z.timing(`${e}.tags.growthSEO.${t}_${d}`,p,1,{country:s})})),n(d,p)}}};(0,d.Tx)((({value:e})=>{const t=(0,m.Af)();let n;n=e<=100?"Good":e>100&&e<=300?"Needs Improvement":"Poor",y("FID",g(e),{timingBucket:n}),t&&y("FIDStartTime",g(t),{timingBucket:n})})),(0,d.Tb)((({value:e})=>{y("LCPCount",(0,m.Kj)()),y("LCP",(e=>10*Math.round(e/10))(e))})),(0,d.Y)((({value:e})=>y("FCP",e))),(0,d.Z8)((({value:e})=>y("INP",e)))};var y=n(763795),T=n(39983);const A=(0,n(30482).XV)("LayoutShiftDebugger"),b=e=>e instanceof HTMLElement&&e.dataset&&(e.dataset.layoutShiftBoundaryId||e.dataset.testId)||e.parentNode&&b(e.parentNode)||null,L=e=>Math.round(1e3*e);let I=[];const x=({staticContext:e,getCurrentRoute:t,getLastNavigationTime:n})=>{const r=(0,p.Jx)({annotateMarks:["initialAppLoad","RenderReactContainer"],name:"cumulative_layout_shift",pwtStaticContext:e});let o=0;const a=e=>{o=e.timeStamp};window.addEventListener("scroll",a),window.addEventListener("beforeunload",(()=>{window.removeEventListener("scroll",a)}));const i=`${(0,h.Z)(e)}.CLS`,s=()=>(e=>{let t=Object.freeze({}),n=0;I.forEach((({value:e,shift:{sources:r},route:o,params:a,hadRecentNavigation:i,hadRecentScroll:s,isAuth:c})=>{if(n+=e,!r||!r.length)return;const u=e/r.length;r.forEach((({node:e})=>{const n=e?b(e)||"ROOT":"NODE_REMOVED",r=a&&a.scope?a.scope:"none",d={route:o,searchScope:r,boundaryId:n,hadRecentNavigation:i,hadRecentScroll:s,isAuth:c},l=JSON.stringify(d);t={...t,[l]:{score:((t[l]||{}).score||0)+u,tags:d}}}))})),Object.keys(t).forEach((n=>{const{score:r,tags:o}=t[n];l.Z.count(`${e}.shifts`,L(r),1,{...o})})),A("Debug CLS boundaries",n,t,I),I=[]})(i);let c,u=0,m=0,f=0;(0,d.kz)((({entries:r,value:a})=>{if(f=a||0,r.length){const{path:i,params:s}=t();c=n();const d=r[0].startTime,l=u!==d,p=l?r:r.slice(m);l&&(u=d),I=I.concat(p.map((t=>({value:a,shift:t,route:i,params:s,hadRecentNavigation:c>0&&c+500>t.startTime,hadRecentScroll:o>0&&o+500>t.startTime,isAuth:e.isAuthenticated})))),m=r.length}}),!0);const _=setInterval((()=>{if(I.length){s();const t=(e=f)<=.1?"good":e<=.25?"adequate":"poor";l.Z.count(`${i}.${t}`,1,1),r.stop(L(f))}var e}),1e3);window.addEventListener("beforeunload",(()=>{clearInterval(_),0===f&&r.abort("no_shifts_detected")}))};let $=null;const P=(e,t)=>{let n,r=0,o=0,a=null,i=null,s=null,c=null,u=[];const d=()=>{o+=1,s=window.requestAnimationFrame(d)},l=()=>{if(c){const n=u.some((e=>null!==a&&a-e>0&&a-e<=500)),o=t(),{isAuthenticated:s}=e;if(n){const t=(0,p.Jx)({name:"scroll_session",pwtStaticContext:e});if(!t)return;const n={surface:o,isAuthenticated:s};if(null===a||null===i||0===r)if(null===a&&null===i)t.error("no_duration",n);else if(null==a)$=i,t.error("no_start",n);else if(null==i){let e;e=$&&a-$<750?"no_end.outside_window":"no_end.single_event",t.error(e,n)}else t.error("no_frames",n);else{$=i;const e=i-a,c=e/r;0===c?t.error("zero_value",n):c<0?t.error("negative_value",n):(t.addBinaryAnnotation("surface",o,"STRING"),t.addBinaryAnnotation("isAuthenticated",s,"BOOL"),t.addBinaryAnnotation("duration_ms",e,"I32"),t.addBinaryAnnotation("total_frames_rendered",r,"I16"),t.stop(c))}}else(0,y.A9)("WARN.scroll_session.not_user",{tags:{isAuthenticated:s,surface:o}})}window.cancelAnimationFrame(s),r=0,o=0,u=[],i=null,a=null,c=null},m=({timeStamp:e})=>{n&&clearTimeout(n),n=setTimeout(l,500),null===c?(c=100*Math.random()<10,c&&(s=window.requestAnimationFrame(d),a=e)):c&&(i=e,r+=o,o=0)},f=({timeStamp:e})=>{u.push(e)};["wheel","pointerdown","keydown"].forEach((e=>{window.addEventListener(e,f,{passive:!0,capture:!0})})),window.addEventListener("scroll",m,{passive:!0}),window.addEventListener("pagehide",(()=>{window.removeEventListener("scroll",m),["wheel","pointerdown","keydown"].forEach((e=>{window.removeEventListener(e,f)}))}))};var R=n(353335),N=n(785893);const B=(0,r.createContext)(null),Z=(0,r.createContext)(null),k=()=>{(0,y.A9)("totalSessionVolume"),window.performance?["clearMarks","clearMeasures","clearResourceTimings","getEntries","getEntriesByName","getEntriesByType","mark","measure","now","setResourceTimingBufferSize"].forEach((e=>{window.performance[e]||(0,y.A9)(`not_supported.window.performance.${e}`)})):(0,y.A9)("not_supported.window.performance"),window.PerformanceObserver||(0,y.A9)("not_supported.window.PerformanceObserer"),(0,u.v)()||(0,y.A9)("not_supported.grid_profiler")},D=()=>{var e;return null!==(e=window.performance)&&void 0!==e&&e.now?window.performance.now():null},O=e=>["/advertiser/"].reduce(((t,n)=>e.includes(n)||t),!1);function M({children:e,immutableLocation:t,resourceTimingCacheSize:n,routerHistoryAction:u,staticContext:d}){const l=(0,r.useRef)(null),p=(0,r.useRef)(null),f=(0,r.useRef)(t),h=(0,r.useRef)(!0),{path:_,params:g}=(0,o.useRouteMatch)(),w=(0,r.useRef)(_),v=(0,r.useRef)(g),S=!d.isCachedRender&&(0,a.Z)(d.deviceType);(0,r.useEffect)((()=>{w.current=_}),[_]),(0,r.useEffect)((()=>{v.current=g}),[g]),(0,r.useEffect)((()=>{if((0,R.X_)({size:n||1e3}),(0,m.UQ)(),k(),h.current=!1,S&&!i.is&&(P(d,(()=>s(w.current)||w.current||"UNKNOWN_SURFACE")),"Chrome"===d.browserName)){x({staticContext:d,getCurrentRoute:()=>({path:w.current,params:v.current}),getLastNavigationTime:()=>p.current||0});const e=c(w.current);e&&E({pwtStaticContext:d,surface:e})}}),[]);if(O(t.pathname)?f.current.pathname!==t.pathname:f.current!==t){f.current=t,p.current=D();const{current:e}=p;if(!h.current){const t=!l.current;(0,y.A9)("routeStart",{tags:{action:u}}),(0,R.Eg)(t),(0,m.Ux)(t),(0,m.on)(),(0,T.tl)();const{customBufferSize:n,defaultBufferSize:r}=(0,R.LH)();e&&((0,y.A9)("routeStart.customBufferSize",{count:n}),(0,y.A9)("routeStart.defaultBufferSize",{count:r}),l.current={time:e,action:u})}}return(0,N.jsx)(B.Provider,{value:S?d:null,children:(0,N.jsx)(Z.Provider,{value:l.current,children:e})})}const F=()=>(0,r.useContext)(Z),z=()=>(0,r.useContext)(B)},583077:(e,t,n)=>{n.d(t,{D3:()=>a,Hd:()=>c,jh:()=>s,rX:()=>i});var r=n(941314),o=n(335741);const a=e=>({...(0,r.Z)(e),domComplete:e.domComplete||0,domContentLoadedEventEnd:e.domContentLoadedEventEnd||0,domContentLoadedEventStart:e.domContentLoadedEventStart||0,domInteractive:e.domInteractive||0,loadEventEnd:e.loadEventEnd||0,loadEventStart:e.loadEventStart||0}),i=()=>{const{firstInputDelay:e,largestContentfulPaint:t}=(0,o.v2)();return{firstInputDelayStart:(null==e?void 0:e.startTime)||0,firstInputDelayEnd:(null==e?void 0:e.endTime)||0,largestContentfulPaint:t||0}},s=(e,t)=>Object.keys(t).reduce(((n,r)=>({...n,[`${e}${r}`]:t[r]})),{}),c=(e,t)=>Object.keys(e).reduce(((n,r)=>t.includes(r)?{...n,[r]:e[r]}:n),Object.freeze({}))},941314:(e,t,n)=>{n.d(t,{Z:()=>r});const r=e=>({connectEnd:e.connectEnd||0,connectStart:e.connectStart||0,domainLookupEnd:e.domainLookupEnd||0,domainLookupStart:e.domainLookupStart||0,fetchStart:e.fetchStart||0,requestStart:e.requestStart||0,redirectEnd:e.redirectEnd||0,redirectStart:e.redirectStart||0,responseEnd:e.responseEnd||0,responseStart:e.responseStart||0,secureConnectionStart:e.secureConnectionStart||0,startTime:e.startTime||0,workerStart:e.workerStart||0,unloadEventStart:e.unloadEventStart||0,unloadEventEnd:e.unloadEventEnd||0})},577491:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(486986),o=n(941314),a=n(769916);const i=({category:e,isDeferred:t,isExternal:n})=>[e].concat(t?["deferred"]:[]).concat(n?["external"]:[]).join("_");function s(e,t){const{category:n,timing:s,isDeferred:c,isExternal:u,isVisuallyCompleteRequired:d}=e;return s.responseEnd&&("image"!==n||d)?{name:i(e),id:(0,a.Z)(),parentId:t,startTime:s.startTime,endTime:s.responseEnd,annotationMap:(0,o.Z)(s),binaryAnnotationMap:{category:(0,r.sk)(n),decodedBodySize:(0,r.cC)(s.decodedBodySize||0),initiatorType:(0,r.sk)(s.initiatorType),isDeferred:(0,r.qr)(c),isExternal:(0,r.qr)(u),name:(0,r.sk)(s.name),nextHopProtocol:(0,r.sk)(s.nextHopProtocol),transferSize:(0,r.cC)(s.transferSize||0)}}:null}},845092:(e,t,n)=>{n.d(t,{ku:()=>b,Jx:()=>y,PY:()=>A});var r=n(30482),o=n(763795),a=n(39983),i=n(583077),s=n(372453),c=n(363959),u=n(335741);const d=()=>(0,u.PJ)().reduce(((e,{identifier:t,loadTime:n,renderTime:r})=>e[`${t}_loadTime`]?e[`${t}_dupe_loadTime`]?{...e,[`${t}_dupe_loadTime`]:n,[`${t}_dupe_renderTime`]:r}:e:{...e,[`${t}_loadTime`]:n,[`${t}_renderTime`]:r}),Object.freeze({}));var l=n(941314),p=n(360588),m=n(353335);const f=e=>{if("pin_closeup"===e){const e=(0,p.Z)();return(e=>{const t=(0,m.y0)();return e.reduce(((e,{name:n,match:r})=>t.filter((e=>r(e))).slice(0,2).reduce(((e,t,r)=>({...e,...(0,i.jh)(`${n}${r?"_dupe1":""}_`,(0,l.Z)(t))})),e)),Object.freeze({}))})([{name:"mainImage",match:({name:t})=>t===e},{name:"PinResource",match:({name:e})=>e.includes("PinResource")}])}return{}};var h=n(324e3),_=n(591614),g=n(577491),w=n(154174),v=n(55941),S=n(769916);const C=(0,r.XV)("LightStopwatch"),E={},y=({annotateExperiments:e,annotateMarks:t,annotateResourceTimingForSurface:n,name:r,pwtStaticContext:u})=>{const l=(()=>{let e=[],t=null;if(window.PerformanceObserver){const n=1e3;t=(0,v.Z)({entryTypes:["resource"]},(t=>{e=e.concat(t.getEntries()),e.length>n&&(e=e.slice(-n))}))}return{get:()=>e,disconnect:()=>{t&&t.disconnect()}}})(),p=(0,w.Z)(u.fullPath);let m=!0,y={...p?{pagePath:{value:p,type:"STRING"}}:{}};(0,o.A9)(`TIMING.${r}`,{tags:{isAuth:u.isAuthenticated}});const T={type:"stopwatch",name:r,navigationType:"initial_app_load"},A={abort:e=>{m?(m=!1,(0,_.Z)({metricId:T,pwtStaticContext:u,result:{type:"ABORT",reason:e}})):(0,o.H)("duplicate_abort_action",{action:r})},error:(e,t)=>{const n={...t,action:r};m?(e&&(0,o.H)(e,n),l&&l.disconnect(),m=!1):(0,o.H)("duplicate_error_action",n)},stop:p=>{if(!m)return void(0,o.H)("duplicate_stop_action",{action:r});m=!1,l.disconnect();const w=(0,S.Z)(),v=(0,c.Z)(),C=l.get(),E={type:"COMPLETE",traceId:(0,S.Z)(),startTime:0,endTime:p,spans:[{name:"network_resources",id:w,startTime:0,endTime:p,annotationMap:{},binaryAnnotationMap:{},parentId:null},...C.map((e=>(0,g.Z)((0,h.p)(e,[]),w))).filter(Boolean)],annotationMap:{...(0,i.jh)("resource_",n?f(n):{}),...(0,i.jh)("element_",d()),...(0,i.jh)("mark_",t&&t.length?(0,i.Hd)((0,a.gQ)(),t):{}),...(0,i.jh)("browser_",v?(0,i.D3)(v):{})},binaryAnnotationMap:(0,s.ng)({annotateExperiments:e,metricId:T,pwtStaticContext:u,performanceResourceTimings:C,binaryAnnotations:y})};(0,_.Z)({metricId:T,pwtStaticContext:u,result:E,isAuth:u.isAuthenticated})},addBinaryAnnotation:(e,t,n)=>{C(`adding binary annotation {${e}: ${String(t)}}`),y={...y,[e]:{value:t,type:n}}}};return E[r]=A,A},T=e=>E[e],A=e=>!!T(e),b=({stopwatchName:e,binaryAnnotationName:t,value:n,annotationType:r})=>{const o=T(e);o&&o.addBinaryAnnotation(t,n,r)}},813107:(e,t,n)=>{n.d(t,{Z:()=>r});const r=e=>{const{deviceType:t,isBot:n,isSocialBot:r}=e;return`coreWebVitalsLite.v1.${(r?"socialBot":n&&"bot")||"nonbot"}.${t}`}},360588:(e,t,n)=>{n.d(t,{Z:()=>o,f:()=>r});const r="closeupImage",o=()=>{if(!document.querySelector)return null;const e=document.querySelector('head>link[rel="preload"][as="image"][href^="https://i.pinimg.com/"]');return e instanceof HTMLLinkElement?e.href:null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/77263-5a32d96f0f6baf0e.mjs.map